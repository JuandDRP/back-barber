function a1_0x13ba(){const _0x2716dd=['regaladas','params','get','xYKta','2603956fYRmIy','Camilo','2990796eajkFD','Barbero\x20no\x20vÃ¡lido.\x20Solo\x20se\x20permiten\x20Juan\x20o\x20Camilo.','collection','/clientes','includes','updateOne','body','YYeBf','admin','express','Horario\x20ya\x20reservado','8578913LiJNKH','/eliminarReserva','wMIsJ','isArray','Faltan\x20datos:\x20nombre\x20cliente,numero\x20celular,\x20barbero,\x20fecha\x20u\x20hora','Hola\x20desde\x20Express\x20y\x20MongoDB\x20ðŸš€','qsALa','Reserva\x20eliminada\x20y\x20cliente\x20actualizado','Error\x20al\x20eliminar\x20la\x20reserva','./db','uuWCj','nyfis','sYyCG','listen','/reservar','104YopakB','Faltan\x20datos','find','then','clientes','Error\x20al\x20eliminar\x20reserva:','UUtUK','hfnHo','toArray','post','error','KVBAk','bWeAk','horas','vHKeC','status','dkQMI','insertOne','kUIRG','2778302migVZg','map','peluqueadas','Eudza','/disponibilidad','/login','deletedCount','cors','json','NYHzI','filter','uNxyc','eAnhL','/reservas/:fecha','2732154WPnGDR','kBCeO','$peluqueadas','Error\x20del\x20servidor','Error\x20en\x20login:','10OdgNpC','/disponibilidad/:barbero/:fecha','Reserva\x20no\x20encontrada','Faltan\x20datos:\x20barbero,\x20fecha,\x20hora\x20o\x20numeroCelular','TOTIE','1446944mRGlJh','log','reservas','1294857EPNVAp','findOne','deleteOne','hora','bocFC','send','Juan','DsFvQ'];a1_0x13ba=function(){return _0x2716dd;};return a1_0x13ba();}const a1_0x57915d=a1_0x52a3;(function(_0x43de76,_0x47a05a){const _0x2091a8=a1_0x52a3,_0xe308aa=_0x43de76();while(!![]){try{const _0x1cb93c=parseInt(_0x2091a8(0x1e1))/0x1+parseInt(_0x2091a8(0x1c9))/0x2+-parseInt(_0x2091a8(0x1f2))/0x3+parseInt(_0x2091a8(0x1f0))/0x4+parseInt(_0x2091a8(0x1dc))/0x5*(-parseInt(_0x2091a8(0x1d7))/0x6)+parseInt(_0x2091a8(0x1fd))/0x7+parseInt(_0x2091a8(0x1b6))/0x8*(-parseInt(_0x2091a8(0x1e4))/0x9);if(_0x1cb93c===_0x47a05a)break;else _0xe308aa['push'](_0xe308aa['shift']());}catch(_0x38480d){_0xe308aa['push'](_0xe308aa['shift']());}}}(a1_0x13ba,0xe42f4));const express=require(a1_0x57915d(0x1fb)),app=express(),cors=require(a1_0x57915d(0x1d0)),conectarDB=require(a1_0x57915d(0x206));app['use'](cors()),app['use'](express[a1_0x57915d(0x1d1)]());let db,reservasCol,disponibilidadesCol,clientesCol;function a1_0x52a3(_0x429cc3,_0x4b6496){const _0x13ba27=a1_0x13ba();return a1_0x52a3=function(_0x52a382,_0x2f2e2f){_0x52a382=_0x52a382-0x1b3;let _0x3ffc52=_0x13ba27[_0x52a382];return _0x3ffc52;},a1_0x52a3(_0x429cc3,_0x4b6496);}conectarDB()[a1_0x57915d(0x1b9)](_0x36af59=>{const _0x289315=a1_0x57915d,_0xfba367={'IktBf':'ðŸš€\x20Servidor\x20escuchando\x20en\x20http://localhost:3001'};db=_0x36af59,reservasCol=db[_0x289315(0x1f4)](_0x289315(0x1e3)),disponibilidadesCol=db['collection']('disponibilidades'),clientesCol=db[_0x289315(0x1f4)](_0x289315(0x1ba)),app[_0x289315(0x1b4)](0xbb9,()=>{const _0x14fac8=_0x289315;console[_0x14fac8(0x1e2)](_0xfba367['IktBf']);});}),app[a1_0x57915d(0x1ee)]('/',(_0x28a81e,_0xa7f872)=>{const _0x44da54=a1_0x57915d,_0x1549e4={'kUIRG':_0x44da54(0x202)};_0xa7f872[_0x44da54(0x1e9)](_0x1549e4[_0x44da54(0x1c8)]);}),app['get'](a1_0x57915d(0x1dd),async(_0x376278,_0x1e6fef)=>{const _0x3b8294=a1_0x57915d,_0xc3ecfe={'uNxyc':_0x3b8294(0x1ea),'eAnhL':_0x3b8294(0x1f1),'wMIsJ':_0x3b8294(0x1f3),'sYyCG':'No\x20hay\x20disponibilidad\x20configurada'},{barbero:_0x8a9f6e,fecha:_0x362585}=_0x376278[_0x3b8294(0x1ed)],_0x49b3b7=[_0xc3ecfe[_0x3b8294(0x1d4)],_0xc3ecfe[_0x3b8294(0x1d5)]];if(!_0x49b3b7[_0x3b8294(0x1f6)](_0x8a9f6e))return _0x1e6fef[_0x3b8294(0x1c5)](0x190)['json']({'error':_0xc3ecfe[_0x3b8294(0x1ff)]});const _0x183109=await disponibilidadesCol[_0x3b8294(0x1e5)]({'barbero':_0x8a9f6e,'fecha':_0x362585});if(!_0x183109)return _0x1e6fef[_0x3b8294(0x1c5)](0x194)['json']({'error':_0xc3ecfe[_0x3b8294(0x1b3)]});const _0x21d194=await reservasCol[_0x3b8294(0x1b8)]({'barbero':_0x8a9f6e,'fecha':_0x362585})[_0x3b8294(0x1be)](),_0x34c0f9=_0x21d194[_0x3b8294(0x1ca)](_0x2aec31=>_0x2aec31[_0x3b8294(0x1e7)]),_0x3d46bf=_0x183109[_0x3b8294(0x1c3)][_0x3b8294(0x1d3)](_0x5bde29=>!_0x34c0f9[_0x3b8294(0x1f6)](_0x5bde29));_0x1e6fef[_0x3b8294(0x1d1)]({'barbero':_0x8a9f6e,'fecha':_0x362585,'disponibles':_0x3d46bf});}),app[a1_0x57915d(0x1ee)](a1_0x57915d(0x1f5),async(_0x1fe83a,_0x1d6720)=>{const _0x230de1=a1_0x57915d,_0x484b8e=await db['collection']('clientes')[_0x230de1(0x1b8)]({})[_0x230de1(0x1be)]();_0x1d6720[_0x230de1(0x1d1)](_0x484b8e);}),app[a1_0x57915d(0x1ee)](a1_0x57915d(0x1d6),async(_0x11d51,_0x4878a7)=>{const _0x1760ed=a1_0x57915d,_0xebf3a4={'YYeBf':'reservas'},{fecha:_0x3a43f5}=_0x11d51[_0x1760ed(0x1ed)],_0x5bdfb7=await db[_0x1760ed(0x1f4)](_0xebf3a4[_0x1760ed(0x1f9)])[_0x1760ed(0x1b8)]({'fecha':_0x3a43f5})[_0x1760ed(0x1be)]();_0x4878a7[_0x1760ed(0x1d1)](_0x5bdfb7);}),app['post'](a1_0x57915d(0x1b5),async(_0x5b1bd3,_0x3ced9d)=>{const _0x25de59=a1_0x57915d,_0x31fb7e={'Jfiyt':function(_0x217275,_0xd3a1a4){return _0x217275||_0xd3a1a4;},'DsFvQ':_0x25de59(0x201),'hfnHo':_0x25de59(0x1ea),'KVBAk':_0x25de59(0x1fc),'Tktji':function(_0x4d1ffa,_0x221116){return _0x4d1ffa>=_0x221116;},'nyfis':function(_0x2c4f76,_0x450e76){return _0x2c4f76+_0x450e76;},'kBCeO':'Reserva\x20realizada\x20con\x20Ã©xito'},{nombreCliente:_0x3aeb8e,numeroCelular:_0xa2adea,barbero:_0x3a8291,fecha:_0x30fbb6,hora:_0x2694fc}=_0x5b1bd3[_0x25de59(0x1f8)];if(_0x31fb7e['Jfiyt'](!_0x3aeb8e,!_0xa2adea)||!_0x3a8291||!_0x30fbb6||!_0x2694fc)return _0x3ced9d['status'](0x190)[_0x25de59(0x1d1)]({'error':_0x31fb7e[_0x25de59(0x1eb)]});const _0x201a79=[_0x31fb7e[_0x25de59(0x1bd)],'Camilo'];if(!_0x201a79['includes'](_0x3a8291))return _0x3ced9d[_0x25de59(0x1c5)](0x190)['json']({'error':_0x25de59(0x1f3)});const _0x200134=await reservasCol[_0x25de59(0x1e5)]({'barbero':_0x3a8291,'fecha':_0x30fbb6,'hora':_0x2694fc});if(_0x200134)return _0x3ced9d[_0x25de59(0x1c5)](0x190)[_0x25de59(0x1d1)]({'error':_0x31fb7e[_0x25de59(0x1c1)]});const _0x5aa676={'nombreCliente':_0x3aeb8e,'numeroCelular':_0xa2adea,'barbero':_0x3a8291,'fecha':_0x30fbb6,'hora':_0x2694fc};await reservasCol[_0x25de59(0x1c7)](_0x5aa676);const _0x3c3a52=await clientesCol[_0x25de59(0x1e5)]({'numeroCelular':_0xa2adea});let _0x2eccbe=0x1,_0x5c46ea=0x0;if(_0x3c3a52){const _0x135c3b=_0x3c3a52[_0x25de59(0x1cb)]||0x0,_0x3b221b=_0x3c3a52[_0x25de59(0x1ec)]||0x0;_0x31fb7e['Tktji'](_0x135c3b,0x7)?(_0x2eccbe=0x1,_0x5c46ea=_0x31fb7e[_0x25de59(0x208)](_0x3b221b,0x1)):(_0x2eccbe=_0x31fb7e['nyfis'](_0x135c3b,0x1),_0x5c46ea=_0x3b221b),await clientesCol[_0x25de59(0x1f7)]({'numeroCelular':_0xa2adea},{'$set':{'nombreCliente':_0x3aeb8e,'peluqueadas':_0x2eccbe,'regaladas':_0x5c46ea}});}else await clientesCol['insertOne']({'numeroCelular':_0xa2adea,'nombreCliente':_0x3aeb8e,'peluqueadas':0x1,'regaladas':0x0});_0x3ced9d[_0x25de59(0x1c5)](0xc9)[_0x25de59(0x1d1)]({'mensaje':_0x31fb7e[_0x25de59(0x1d8)],'reserva':_0x5aa676,'peluqueadas':_0x2eccbe,'regaladas':_0x5c46ea});}),app[a1_0x57915d(0x1bf)](a1_0x57915d(0x1cd),async(_0x4262c2,_0x3bec7d)=>{const _0x13dd5f=a1_0x57915d,_0xb5d97b={'bWeAk':function(_0x1e7487,_0x46a4d6){return _0x1e7487||_0x46a4d6;},'qsALa':_0x13dd5f(0x1f1),'UUtUK':'Barbero\x20no\x20vÃ¡lido.\x20Solo\x20se\x20permiten\x20Juan\x20o\x20Camilo.','bocFC':'Disponibilidad\x20actualizada\x20correctamente'},{barbero:_0x30ee0b,fecha:_0x346366,horas:_0x47c9c1}=_0x4262c2[_0x13dd5f(0x1f8)];if(_0xb5d97b[_0x13dd5f(0x1c2)](!_0x30ee0b,!_0x346366)||!Array[_0x13dd5f(0x200)](_0x47c9c1))return _0x3bec7d[_0x13dd5f(0x1c5)](0x190)[_0x13dd5f(0x1d1)]({'error':'Faltan\x20datos:\x20barbero,\x20fecha\x20u\x20horas'});const _0x80ce16=[_0x13dd5f(0x1ea),_0xb5d97b[_0x13dd5f(0x203)]];if(!_0x80ce16[_0x13dd5f(0x1f6)](_0x30ee0b))return _0x3bec7d[_0x13dd5f(0x1c5)](0x190)[_0x13dd5f(0x1d1)]({'error':_0xb5d97b[_0x13dd5f(0x1bc)]});const _0x13339f=await disponibilidadesCol[_0x13dd5f(0x1f7)]({'barbero':_0x30ee0b,'fecha':_0x346366},{'$addToSet':{'horas':{'$each':_0x47c9c1}}},{'upsert':!![]});_0x3bec7d[_0x13dd5f(0x1c5)](0xc9)[_0x13dd5f(0x1d1)]({'mensaje':_0xb5d97b[_0x13dd5f(0x1e8)]});}),app[a1_0x57915d(0x1bf)](a1_0x57915d(0x1ce),async(_0x7057ba,_0x5b255c)=>{const _0x29a371=a1_0x57915d,_0x733eef={'uuWCj':function(_0x3c0ae8,_0xd51ef3){return _0x3c0ae8||_0xd51ef3;},'dkQMI':_0x29a371(0x1fa),'Eudza':'Credenciales\x20invÃ¡lidas','vHKeC':_0x29a371(0x1db)},{usuario:_0x2531ea,contrasena:_0x13fb45}=_0x7057ba['body'];if(_0x733eef[_0x29a371(0x207)](!_0x2531ea,!_0x13fb45))return _0x5b255c[_0x29a371(0x1c5)](0x190)[_0x29a371(0x1d1)]({'acceso':![],'mensaje':_0x29a371(0x1b7)});try{const _0x170508=db[_0x29a371(0x1f4)](_0x733eef[_0x29a371(0x1c6)]),_0x3b243=await _0x170508[_0x29a371(0x1e5)]({'usuario':_0x2531ea,'contrasena':_0x13fb45});return _0x3b243?_0x5b255c[_0x29a371(0x1d1)]({'acceso':!![]}):_0x5b255c[_0x29a371(0x1c5)](0x191)['json']({'acceso':![],'mensaje':_0x733eef[_0x29a371(0x1cc)]});}catch(_0x2a7e99){return console[_0x29a371(0x1c0)](_0x733eef[_0x29a371(0x1c4)],_0x2a7e99),_0x5b255c['status'](0x1f4)['json']({'acceso':![],'mensaje':_0x29a371(0x1da)});}}),app[a1_0x57915d(0x1bf)](a1_0x57915d(0x1fe),async(_0x19ef42,_0x5d38f4)=>{const _0x5d5b52=a1_0x57915d,_0x3b4b77={'NYHzI':function(_0x4f72ac,_0x10d948){return _0x4f72ac||_0x10d948;},'XaseK':function(_0x3a4863,_0x582ca4){return _0x3a4863===_0x582ca4;},'aiJdc':_0x5d5b52(0x1de),'TOTIE':_0x5d5b52(0x1d9),'xYKta':_0x5d5b52(0x204),'UcBhC':_0x5d5b52(0x205)},{barbero:_0x261265,fecha:_0x344b5a,hora:_0x1d5d9b,numeroCelular:_0x1444e8}=_0x19ef42[_0x5d5b52(0x1f8)];if(_0x3b4b77[_0x5d5b52(0x1d2)](!_0x261265,!_0x344b5a)||!_0x1d5d9b||!_0x1444e8)return _0x5d38f4[_0x5d5b52(0x1c5)](0x190)[_0x5d5b52(0x1d1)]({'error':_0x5d5b52(0x1df)});try{const _0x15edd3=await reservasCol[_0x5d5b52(0x1e6)]({'barbero':_0x261265,'fecha':_0x344b5a,'hora':_0x1d5d9b,'numeroCelular':_0x1444e8});if(_0x3b4b77['XaseK'](_0x15edd3[_0x5d5b52(0x1cf)],0x0))return _0x5d38f4['status'](0x194)[_0x5d5b52(0x1d1)]({'error':_0x3b4b77['aiJdc']});await clientesCol[_0x5d5b52(0x1f7)]({'numeroCelular':_0x1444e8},[{'$set':{'peluqueadas':{'$cond':[{'$gt':[_0x3b4b77[_0x5d5b52(0x1e0)],0x0]},{'$subtract':[_0x5d5b52(0x1d9),0x1]},0x0]}}}]),_0x5d38f4['json']({'mensaje':_0x3b4b77[_0x5d5b52(0x1ef)]});}catch(_0x5ec282){console['error'](_0x5d5b52(0x1bb),_0x5ec282),_0x5d38f4[_0x5d5b52(0x1c5)](0x1f4)[_0x5d5b52(0x1d1)]({'error':_0x3b4b77['UcBhC']});}});